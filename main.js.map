{
  "version": 3,
  "sources": ["src/main.js", "src/openrouter.js"],
  "sourcesContent": ["import {\r\n  FuzzySuggestModal,\r\n  Modal,\r\n  Notice,\r\n  Plugin,\r\n  PluginSettingTab,\r\n  Setting,\r\n  TFile,\r\n} from \"obsidian\";\r\nimport { OpenRouterClient } from \"./openrouter\";\r\n\r\nconst TEST_COMMAND_ID = \"lazy-dm-test-openrouter\";\r\nconst SCAN_COMMAND_ID = \"lazy-dm-scan-folder\";\r\nconst PREP_COMMAND_ID = \"lazy-dm-generate-prep-2-step\";\r\nconst ANNOTATE_GM_ZONES_COMMAND_ID = \"lazy-dm-annotate-gm-zones\";\r\nconst OPEN_GM_ZONES_COMMAND_ID = \"lazy-dm-open-gm-zones\";\r\nconst MAX_FILE_BYTES = 8 * 1024 * 1024; // 8 MB guardrail to avoid crashing on huge attachments.\r\n\r\nconst DEFAULT_SETTINGS = {\r\n  openrouterApiKey: \"\",\r\n  extractorModel: \"z-ai/glm-4.6v\",\r\n  synthesizerModel: \"deepseek/deepseek-v3.2\",\r\n  openrouterBaseUrl: \"https://openrouter.ai/api/v1\",\r\n  lastGmZonesPath: \"\",\r\n};\r\n\r\nexport default class LazyDungeonMasterPlugin extends Plugin {\r\n  async onload() {\r\n    await this.loadSettings();\r\n\r\n    this.addSettingTab(new LazyDMSettingsTab(this.app, this));\r\n\r\n    this.addCommand({\r\n      id: TEST_COMMAND_ID,\r\n      name: \"Lazy DM: Test OpenRouter\",\r\n      callback: () => this.testOpenRouter(),\r\n    });\r\n\r\n    this.addCommand({\r\n      id: SCAN_COMMAND_ID,\r\n      name: \"Lazy DM: Scan Folder\",\r\n      callback: () => this.scanFolderAndAppend(),\r\n    });\r\n\r\n    this.addCommand({\r\n      id: PREP_COMMAND_ID,\r\n      name: \"Lazy DM: Generate Prep (2-step)\",\r\n      callback: () => this.generatePrepTwoStep(),\r\n    });\r\n\r\n    this.addCommand({\r\n      id: ANNOTATE_GM_ZONES_COMMAND_ID,\r\n      name: \"Lazy DM: Annotate Map (GM zones)\",\r\n      callback: () => this.annotateGmZones(),\r\n    });\r\n\r\n    this.addCommand({\r\n      id: OPEN_GM_ZONES_COMMAND_ID,\r\n      name: \"Lazy DM: Open GM Zones Map\",\r\n      callback: () => this.openLastGmZonesMap(),\r\n    });\r\n  }\r\n\r\n  async loadSettings() {\r\n    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());\r\n  }\r\n\r\n  async saveSettings() {\r\n    await this.saveData(this.settings);\r\n  }\r\n\r\n  async testOpenRouter() {\r\n    const { openrouterApiKey, openrouterBaseUrl, synthesizerModel } = this.settings;\r\n\r\n    if (!openrouterApiKey) {\r\n      new Notice(\"Set the OpenRouter API key in settings first.\");\r\n      return;\r\n    }\r\n\r\n    const client = new OpenRouterClient({\r\n      baseUrl: openrouterBaseUrl,\r\n      apiKey: openrouterApiKey,\r\n    });\r\n\r\n    try {\r\n      const response = await client.createChatCompletion({\r\n        model: synthesizerModel,\r\n        messages: [\r\n          {\r\n            role: \"user\",\r\n            content: \"Reply with a short confirmation that OpenRouter is reachable.\",\r\n          },\r\n        ],\r\n      });\r\n\r\n      const content =\r\n        response?.choices?.[0]?.message?.content || \"Received a response from OpenRouter.\";\r\n      new Notice(`OpenRouter test succeeded: ${content}`.slice(0, 200));\r\n    } catch (error) {\r\n      console.error(\"OpenRouter test failed\", error);\r\n      new Notice(\"OpenRouter test failed. Check console for details.\");\r\n    }\r\n  }\r\n\r\n  buildFolderSummary(folder) {\r\n    const files = folder?.children?.filter((item) => item instanceof TFile) || [];\r\n\r\n    const imagePattern = /\\.(png|jpe?g|webp)$/i;\r\n    const playerImagePattern = /_player\\.(png|jpe?g|webp)$/i;\r\n\r\n    const images = files.filter((file) => imagePattern.test(file.name));\r\n    const playerImages = images.filter((file) => playerImagePattern.test(file.name));\r\n    const selectedMaps = (playerImages.length ? playerImages : images).map((file) => ({\r\n      path: file.path,\r\n      name: file.basename,\r\n    }));\r\n\r\n    const pcs = files\r\n      .filter((file) => /\\.pdf$/i.test(file.name))\r\n      .map((file) => ({ path: file.path, name: file.basename }));\r\n\r\n    return {\r\n      folderPath: folder?.path || \"\",\r\n      maps: selectedMaps,\r\n      pcs,\r\n    };\r\n  }\r\n\r\n  async scanFolderAndAppend() {\r\n    const activeFile = this.app.workspace.getActiveFile();\r\n\r\n    if (!activeFile) {\r\n      new Notice(\"Open a note to scan its folder.\");\r\n      return;\r\n    }\r\n\r\n    const folder = activeFile.parent;\r\n\r\n    if (!folder) {\r\n      new Notice(\"Could not determine the folder for the current note.\");\r\n      return;\r\n    }\r\n\r\n    const summary = this.buildFolderSummary(folder);\r\n    const jsonBlock = `\\n\\n\\`\\`\\`json\\n${JSON.stringify(summary, null, 2)}\\n\\`\\`\\``;\r\n\r\n    try {\r\n      await this.app.vault.append(activeFile, jsonBlock);\r\n      new Notice(\"Folder summary appended to the current note.\");\r\n    } catch (error) {\r\n      console.error(\"Failed to append folder summary\", error);\r\n      new Notice(\"Failed to append folder summary. Check console for details.\");\r\n    }\r\n  }\r\n\r\n  async loadFileAsDataUrl(file) {\r\n    if (!file) {\r\n      const message = \"No file provided to load as data URL.\";\r\n      console.error(message);\r\n      new Notice(message);\r\n      return null;\r\n    }\r\n\r\n    const extension = (file.extension || file.name?.split(\".\").pop() || \"\").toLowerCase();\r\n    const isImage = /^(png|jpe?g|webp)$/.test(extension);\r\n    const isPdf = extension === \"pdf\";\r\n    if (!isImage && !isPdf) {\r\n      const message = `Unsupported file type: ${extension || \"unknown\"}.`;\r\n      console.error(message, file.path || \"(no path)\");\r\n      new Notice(message);\r\n      return null;\r\n    }\r\n\r\n    try {\r\n      const binary = await this.app.vault.readBinary(file);\r\n      const byteLength = binary?.byteLength || binary?.length || 0;\r\n\r\n      if (byteLength > MAX_FILE_BYTES) {\r\n        const sizeMb = (byteLength / (1024 * 1024)).toFixed(1);\r\n        const maxMb = (MAX_FILE_BYTES / (1024 * 1024)).toFixed(1);\r\n        // Smoke check: large files should short-circuit before base64 conversion.\r\n        const message = `File is too large to load (${sizeMb} MB). Please reduce the size below ${maxMb} MB.`;\r\n        console.warn(message, file.path || \"(no path)\");\r\n        new Notice(message);\r\n        return null;\r\n      }\r\n\r\n      const base64 = Buffer.from(binary).toString(\"base64\");\r\n      const mimeType = isPdf ? \"application/pdf\" : `image/${extension === \"jpg\" ? \"jpeg\" : extension}`;\r\n      const dataUrl = `data:${mimeType};base64,${base64}`;\r\n\r\n      // Smoke check: ensure data URL prefix stays intact for supported files.\r\n      if (!dataUrl.startsWith(`data:${mimeType};base64,`)) {\r\n        console.warn(\"Data URL prefix mismatch\", { mimeType, dataUrl: dataUrl.slice(0, 40) });\r\n      }\r\n\r\n      return dataUrl;\r\n    } catch (error) {\r\n      const message = `Failed to load file as data URL: ${file.path || file.name}.`;\r\n      console.error(message, error);\r\n      new Notice(message);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  stripJsonFences(text) {\r\n    if (!text) return \"\";\r\n    const fencePattern = /^```(?:json)?\\s*[\\r\\n]?|```$/g;\r\n    return text.replace(fencePattern, \"\").trim();\r\n  }\r\n\r\n  parseJsonContent(content) {\r\n    if (!content) return null;\r\n    try {\r\n      return JSON.parse(this.stripJsonFences(content));\r\n    } catch (error) {\r\n      console.warn(\"Failed to parse JSON content\", error, content?.slice?.(0, 200));\r\n      return null;\r\n    }\r\n  }\r\n\r\n  async loadAssetsForFolder(folder) {\r\n    const summary = this.buildFolderSummary(folder);\r\n    const maps = [];\r\n    const pcs = [];\r\n\r\n    for (const map of summary.maps) {\r\n      const vaultFile = this.app.vault.getAbstractFileByPath(map.path);\r\n      const dataUrl = await this.loadFileAsDataUrl(vaultFile);\r\n      if (dataUrl) {\r\n        maps.push({ ...map, dataUrl });\r\n      }\r\n    }\r\n\r\n    for (const pc of summary.pcs) {\r\n      const vaultFile = this.app.vault.getAbstractFileByPath(pc.path);\r\n      const dataUrl = await this.loadFileAsDataUrl(vaultFile);\r\n      if (dataUrl) {\r\n        pcs.push({ ...pc, dataUrl });\r\n      }\r\n    }\r\n\r\n    return { maps, pcs, folderPath: summary.folderPath };\r\n  }\r\n\r\n  async pickMapFromFolder(folder) {\r\n    const summary = this.buildFolderSummary(folder);\r\n\r\n    if (!summary.maps.length) {\r\n      new Notice(\"No maps detected in the current folder.\");\r\n      return null;\r\n    }\r\n\r\n    const selector = new MapSelectModal(this.app, summary.maps);\r\n    const selection = await selector.openAndGetSelection();\r\n\r\n    if (!selection) {\r\n      new Notice(\"Map selection cancelled.\");\r\n      return null;\r\n    }\r\n\r\n    const file = this.app.vault.getAbstractFileByPath(selection.path);\r\n    if (!(file instanceof TFile)) {\r\n      new Notice(\"Selected map could not be loaded.\");\r\n      return null;\r\n    }\r\n\r\n    return file;\r\n  }\r\n\r\n  async annotateGmZones() {\r\n    const activeFile = this.app.workspace.getActiveFile();\r\n\r\n    if (!activeFile) {\r\n      new Notice(\"Open a note to choose a map from its folder.\");\r\n      return;\r\n    }\r\n\r\n    const folder = activeFile.parent;\r\n\r\n    if (!folder) {\r\n      new Notice(\"Could not determine the folder for the current note.\");\r\n      return;\r\n    }\r\n\r\n    const mapFile = await this.pickMapFromFolder(folder);\r\n    if (!mapFile) {\r\n      return;\r\n    }\r\n\r\n    const dataUrl = await this.loadFileAsDataUrl(mapFile);\r\n    if (!dataUrl) {\r\n      return;\r\n    }\r\n\r\n    const modal = new GmZoneModal(this.app, this, mapFile, dataUrl);\r\n    modal.open();\r\n  }\r\n\r\n  async openLastGmZonesMap() {\r\n    const lastPath = this.settings.lastGmZonesPath;\r\n\r\n    if (!lastPath) {\r\n      new Notice(\"No GM zones map has been generated yet.\");\r\n      return;\r\n    }\r\n\r\n    const file = this.app.vault.getAbstractFileByPath(lastPath);\r\n    if (!(file instanceof TFile)) {\r\n      new Notice(\"Stored GM zones map could not be found.\");\r\n      return;\r\n    }\r\n\r\n    const leaf = this.app.workspace.getLeaf(true);\r\n    await leaf.openFile(file);\r\n  }\r\n\r\n  buildExtractorMessages({ maps, pcs }) {\r\n    const intro =\r\n      \"Extract structured prep details from the provided maps and party sheets. Reply with STRICT JSON only.\";\r\n\r\n    const schema = `The JSON must follow this structure:\r\n{\r\n  \"maps\": [\r\n    {\r\n      \"name\": \"Name of the map (prefer the file name)\",\r\n      \"file\": \"file name\",\r\n      \"zones\": [\r\n        { \"zoneId\": \"A-1\", \"title\": \"Short title\", \"summary\": \"1-2 sentence summary\" }\r\n      ]\r\n    }\r\n  ],\r\n  \"zone_descriptions\": [\r\n    { \"zoneId\": \"A-1\", \"details\": \"Longer description including terrain, clues, secrets\" }\r\n  ],\r\n  \"connections\": [\r\n    { \"from\": \"A-1\", \"to\": \"A-2\", \"note\": \"How they connect; include cross-map leads\" }\r\n  ],\r\n  \"party_summary\": {\r\n    \"roles\": \"Party composition and roles\",\r\n    \"key_abilities\": \"Spells, maneuvers, notable items\",\r\n    \"weak_saves\": \"Notable weak defenses\",\r\n    \"senses\": \"Perception or sensory advantages\"\r\n  },\r\n  \"transitions\": [\r\n    { \"fromMap\": \"Map file name\", \"toMap\": \"Other map file\", \"hook\": \"Suggested transition scene\" }\r\n  ]\r\n}`;\r\n\r\n    const contentBlocks = [\r\n      { type: \"text\", text: `${intro}\\n${schema}\\nUse zoneId prefixes like A-, B- per map.` },\r\n    ];\r\n\r\n    maps.forEach((map, index) => {\r\n      contentBlocks.push({ type: \"text\", text: `Map ${index + 1}: ${map.name} (${map.path || map.file})` });\r\n      contentBlocks.push({\r\n        type: \"image_url\",\r\n        image_url: { url: map.dataUrl, detail: \"high\" },\r\n      });\r\n    });\r\n\r\n    pcs.forEach((pc, index) => {\r\n      contentBlocks.push({ type: \"text\", text: `Character PDF ${index + 1}: ${pc.name}` });\r\n      contentBlocks.push({ type: \"input_text\", text: pc.dataUrl });\r\n    });\r\n\r\n    return [\r\n      {\r\n        role: \"system\",\r\n        content:\r\n          \"You are an expert prep extractor. Respond with valid JSON only. Do not wrap responses in markdown fences.\",\r\n      },\r\n      { role: \"user\", content: contentBlocks },\r\n    ];\r\n  }\r\n\r\n  buildSynthesizerMessages({ extractedJson, maps, pcs }) {\r\n    const filenames = {\r\n      maps: maps.map((map) => map.path || map.name),\r\n      pcs: pcs.map((pc) => pc.path || pc.name),\r\n    };\r\n\r\n    const instructions = `Erzeuge ein Markdown-Prep-Dokument auf Deutsch. Nutze NUR die gelieferten extrahierten Daten. Anforderungen:\r\n- F\u00FCge pro Karte zwei Links hinzu: \"player\" (Spieleransicht) und \"gm_zones\" (Zonenreferenz, auch wenn der Link nur ein Platzhalter ist).\r\n- Verkn\u00FCpfe Szenen klar mit den jeweiligen zoneId aus den extrahierten Daten.\r\n- Baue einen starken Auftakt (Strong Start).\r\n- Liste 10 Geheimnisse & Hinweise mit vorgeschlagenen Drop-Zonen (zoneId).\r\n- Baue Begegnungen, die auf die Party zugeschnitten sind (Nutze party_summary).\r\n- Schlage Belohnungen vor.\r\n- F\u00FCge \u00DCbergangsszenen zwischen Karten basierend auf transitions hinzu.`;\r\n\r\n    return [\r\n      {\r\n        role: \"system\",\r\n        content: instructions,\r\n      },\r\n      {\r\n        role: \"user\",\r\n        content: `Dateinamen: ${JSON.stringify(filenames, null, 2)}\\nExtrahierte Daten:\\n${JSON.stringify(\r\n          extractedJson,\r\n          null,\r\n          2\r\n        )}`,\r\n      },\r\n    ];\r\n  }\r\n\r\n  async requestExtractor(payload) {\r\n    const { extractorModel, openrouterApiKey, openrouterBaseUrl } = this.settings;\r\n\r\n    const client = new OpenRouterClient({\r\n      baseUrl: openrouterBaseUrl,\r\n      apiKey: openrouterApiKey,\r\n    });\r\n\r\n    let lastContent = \"\";\r\n    for (let attempt = 1; attempt <= 2; attempt++) {\r\n      const response = await client.createChatCompletion({\r\n        model: extractorModel,\r\n        messages: payload,\r\n      });\r\n\r\n      lastContent = response?.choices?.[0]?.message?.content || \"\";\r\n      const parsed = this.parseJsonContent(lastContent);\r\n      if (parsed) {\r\n        return parsed;\r\n      }\r\n\r\n      if (attempt === 1) {\r\n        new Notice(\"Extractor returned invalid JSON. Retrying once...\");\r\n      }\r\n    }\r\n\r\n    throw new Error(\"Extractor failed to produce valid JSON after retry.\");\r\n  }\r\n\r\n  async requestSynthesizer(payload) {\r\n    const { synthesizerModel, openrouterApiKey, openrouterBaseUrl } = this.settings;\r\n\r\n    const client = new OpenRouterClient({\r\n      baseUrl: openrouterBaseUrl,\r\n      apiKey: openrouterApiKey,\r\n    });\r\n\r\n    const response = await client.createChatCompletion({\r\n      model: synthesizerModel,\r\n      messages: payload,\r\n    });\r\n\r\n    return response?.choices?.[0]?.message?.content || \"\";\r\n  }\r\n\r\n  async updateNoteWithPrep(note, markdown) {\r\n    const startMarker = \"<!-- LAZY_DM_START -->\";\r\n    const endMarker = \"<!-- LAZY_DM_END -->\";\r\n    const current = await this.app.vault.read(note);\r\n\r\n    const startIndex = current.indexOf(startMarker);\r\n    const endIndex = current.indexOf(endMarker);\r\n\r\n    let nextContent;\r\n    if (startIndex !== -1 && endIndex !== -1 && endIndex > startIndex) {\r\n      const before = current.slice(0, startIndex + startMarker.length);\r\n      const after = current.slice(endIndex);\r\n      nextContent = `${before}\\n\\n${markdown.trim()}\\n\\n${after}`;\r\n    } else {\r\n      nextContent = `${current.trim()}\\n\\n${startMarker}\\n${markdown.trim()}\\n${endMarker}\\n`;\r\n    }\r\n\r\n    await this.app.vault.modify(note, nextContent);\r\n  }\r\n\r\n  async generatePrepTwoStep() {\r\n    const activeFile = this.app.workspace.getActiveFile();\r\n\r\n    if (!activeFile) {\r\n      new Notice(\"Open a note to generate prep.\");\r\n      return;\r\n    }\r\n\r\n    const folder = activeFile.parent;\r\n    if (!folder) {\r\n      new Notice(\"Could not determine the folder for the current note.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const assets = await this.loadAssetsForFolder(folder);\r\n\r\n      if (!assets.maps.length && !assets.pcs.length) {\r\n        new Notice(\"No maps or character PDFs found in the folder.\");\r\n        return;\r\n      }\r\n\r\n      new Notice(\"Extracting structured prep from assets...\");\r\n      const extractorMessages = this.buildExtractorMessages(assets);\r\n      const extracted = await this.requestExtractor(extractorMessages);\r\n\r\n      new Notice(\"Synthesizing final prep in German...\");\r\n      const synthesizerMessages = this.buildSynthesizerMessages({ extractedJson: extracted, ...assets });\r\n      const markdown = await this.requestSynthesizer(synthesizerMessages);\r\n\r\n      await this.updateNoteWithPrep(activeFile, markdown);\r\n      new Notice(\"Lazy DM prep inserted into the note.\");\r\n    } catch (error) {\r\n      console.error(\"Lazy DM prep generation failed\", error);\r\n      new Notice(\"Prep generation failed. Check console for details.\");\r\n    }\r\n  }\r\n}\r\n\r\nclass MapSelectModal extends FuzzySuggestModal {\r\n  constructor(app, maps) {\r\n    super(app);\r\n    this.maps = maps;\r\n    this.promise = new Promise((resolve) => {\r\n      this.resolver = resolve;\r\n    });\r\n    this.chosen = false;\r\n  }\r\n\r\n  getItems() {\r\n    return this.maps;\r\n  }\r\n\r\n  getItemText(item) {\r\n    return item?.name || item?.path || \"map\";\r\n  }\r\n\r\n  onChooseItem(item) {\r\n    this.chosen = true;\r\n    this.resolver(item);\r\n  }\r\n\r\n  onClose() {\r\n    if (!this.chosen) {\r\n      this.resolver(null);\r\n    }\r\n  }\r\n\r\n  async openAndGetSelection() {\r\n    this.open();\r\n    return this.promise;\r\n  }\r\n}\r\n\r\nclass GmZoneModal extends Modal {\r\n  constructor(app, plugin, mapFile, dataUrl) {\r\n    super(app);\r\n    this.plugin = plugin;\r\n    this.mapFile = mapFile;\r\n    this.dataUrl = dataUrl;\r\n    this.zoneCount = 6;\r\n    this.zonePrefix = \"Z\";\r\n    this.customIds = \"\";\r\n    this.points = [];\r\n  }\r\n\r\n  onOpen() {\r\n    const { contentEl } = this;\r\n    contentEl.empty();\r\n\r\n    contentEl.createEl(\"h2\", { text: `Annotate GM Zones: ${this.mapFile.basename}` });\r\n    contentEl.createEl(\"p\", {\r\n      text: \"Enter how many zones you want, or paste custom zone IDs. Click the map in order to place labels.\",\r\n    });\r\n\r\n    const controls = contentEl.createDiv({ cls: \"lazy-gm-zone-controls\" });\r\n    controls.createEl(\"label\", { text: \"Zone count\" });\r\n    this.countInput = controls.createEl(\"input\", { type: \"number\" });\r\n    this.countInput.value = String(this.zoneCount);\r\n    this.countInput.min = \"1\";\r\n    this.countInput.addEventListener(\"change\", () => this.handleConfigChange());\r\n\r\n    controls.createEl(\"label\", { text: \"Default prefix\" });\r\n    this.prefixInput = controls.createEl(\"input\", { type: \"text\" });\r\n    this.prefixInput.value = this.zonePrefix;\r\n    this.prefixInput.addEventListener(\"input\", () => this.handleConfigChange());\r\n\r\n    controls.createEl(\"label\", { text: \"Custom zone IDs (comma or newline separated)\" });\r\n    this.idsInput = controls.createEl(\"textarea\");\r\n    this.idsInput.placeholder = \"A-Z1, A-Z2, ...\";\r\n    this.idsInput.addEventListener(\"input\", () => this.handleConfigChange());\r\n\r\n    this.statusEl = contentEl.createEl(\"div\", { cls: \"lazy-gm-zone-status\" });\r\n\r\n    this.mapContainer = contentEl.createDiv({ cls: \"lazy-gm-zone-map\" });\r\n    this.mapContainer.style.position = \"relative\";\r\n    this.mapContainer.style.maxHeight = \"60vh\";\r\n    this.mapContainer.style.overflow = \"auto\";\r\n\r\n    const imageWrapper = this.mapContainer.createDiv({ cls: \"lazy-gm-zone-map-wrapper\" });\r\n    imageWrapper.style.position = \"relative\";\r\n\r\n    this.imageEl = imageWrapper.createEl(\"img\", {\r\n      attr: { src: this.dataUrl, alt: \"GM map\" },\r\n    });\r\n    this.imageEl.style.display = \"block\";\r\n    this.imageEl.style.width = \"100%\";\r\n    this.imageEl.style.height = \"auto\";\r\n\r\n    this.markerLayer = imageWrapper.createDiv({ cls: \"lazy-gm-zone-markers\" });\r\n    this.markerLayer.style.position = \"absolute\";\r\n    this.markerLayer.style.left = \"0\";\r\n    this.markerLayer.style.top = \"0\";\r\n    this.markerLayer.style.width = \"100%\";\r\n    this.markerLayer.style.height = \"100%\";\r\n    this.markerLayer.style.pointerEvents = \"none\";\r\n\r\n    imageWrapper.addEventListener(\"click\", (event) => this.handleMapClick(event));\r\n\r\n    const actions = contentEl.createDiv({ cls: \"lazy-gm-zone-actions\" });\r\n    const clearButton = actions.createEl(\"button\", { text: \"Clear markers\" });\r\n    clearButton.addEventListener(\"click\", () => this.resetMarkers());\r\n\r\n    this.saveButton = actions.createEl(\"button\", { text: \"Save labeled map\" });\r\n    this.saveButton.addEventListener(\"click\", () => this.saveLabeledMap());\r\n\r\n    this.updateStatus();\r\n  }\r\n\r\n  handleConfigChange() {\r\n    this.zoneCount = Math.max(1, parseInt(this.countInput.value, 10) || 1);\r\n    this.zonePrefix = this.prefixInput.value?.trim() || \"Z\";\r\n    this.customIds = this.idsInput.value || \"\";\r\n    this.resetMarkers();\r\n    this.updateStatus();\r\n  }\r\n\r\n  getZoneIds() {\r\n    const provided = (this.customIds || \"\")\r\n      .split(/[,\\n]/)\r\n      .map((item) => item.trim())\r\n      .filter(Boolean);\r\n\r\n    if (provided.length) {\r\n      return provided;\r\n    }\r\n\r\n    return Array.from({ length: this.zoneCount }, (_, index) => `${this.zonePrefix}${index + 1}`);\r\n  }\r\n\r\n  resetMarkers() {\r\n    this.points = [];\r\n    if (this.markerLayer) {\r\n      this.markerLayer.empty();\r\n    }\r\n    this.updateStatus();\r\n  }\r\n\r\n  updateStatus() {\r\n    const zoneIds = this.getZoneIds();\r\n    const nextIndex = this.points.length;\r\n    const remaining = zoneIds.length - nextIndex;\r\n\r\n    const nextLabel = zoneIds[nextIndex] || \"All placed\";\r\n    this.statusEl.setText(`Next label: ${nextLabel} | Remaining: ${Math.max(0, remaining)}`);\r\n\r\n    if (this.saveButton) {\r\n      this.saveButton.disabled = this.points.length !== zoneIds.length || !zoneIds.length;\r\n    }\r\n  }\r\n\r\n  handleMapClick(event) {\r\n    const zoneIds = this.getZoneIds();\r\n    const nextIndex = this.points.length;\r\n\r\n    if (!zoneIds.length) {\r\n      new Notice(\"Add at least one zone.\");\r\n      return;\r\n    }\r\n\r\n    if (nextIndex >= zoneIds.length) {\r\n      new Notice(\"All zones placed. Clear markers to start over.\");\r\n      return;\r\n    }\r\n\r\n    const rect = this.imageEl.getBoundingClientRect();\r\n    const xRel = (event.clientX - rect.left) / rect.width;\r\n    const yRel = (event.clientY - rect.top) / rect.height;\r\n\r\n    this.points.push({ id: zoneIds[nextIndex], x: xRel, y: yRel });\r\n    this.renderMarker(zoneIds[nextIndex], xRel, yRel);\r\n    this.updateStatus();\r\n  }\r\n\r\n  renderMarker(label, xRel, yRel) {\r\n    const marker = this.markerLayer.createDiv({ cls: \"lazy-gm-zone-marker\" });\r\n    marker.style.position = \"absolute\";\r\n    marker.style.transform = \"translate(-50%, -50%)\";\r\n    marker.style.left = `${(xRel * 100).toFixed(4)}%`;\r\n    marker.style.top = `${(yRel * 100).toFixed(4)}%`;\r\n    marker.style.background = \"rgba(0, 0, 0, 0.75)\";\r\n    marker.style.color = \"white\";\r\n    marker.style.padding = \"4px 8px\";\r\n    marker.style.borderRadius = \"999px\";\r\n    marker.style.fontWeight = \"bold\";\r\n    marker.style.fontSize = \"12px\";\r\n    marker.style.pointerEvents = \"none\";\r\n    marker.setText(label);\r\n  }\r\n\r\n  async saveLabeledMap() {\r\n    const zoneIds = this.getZoneIds();\r\n    if (this.points.length !== zoneIds.length) {\r\n      new Notice(\"Place all zones before saving.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const labeledData = await this.renderLabeledImage();\r\n      const outputName = `${this.mapFile.basename}_gm_zones.png`;\r\n      const basePath = this.mapFile.parent?.path || \"\";\r\n      const outputPath = basePath ? `${basePath}/${outputName}` : outputName;\r\n\r\n      const existing = this.app.vault.getAbstractFileByPath(outputPath);\r\n      const binary = Buffer.from(labeledData, \"base64\");\r\n\r\n      if (existing instanceof TFile) {\r\n        await this.app.vault.modifyBinary(existing, binary);\r\n      } else {\r\n        await this.app.vault.createBinary(outputPath, binary);\r\n      }\r\n\r\n      this.plugin.settings.lastGmZonesPath = outputPath;\r\n      await this.plugin.saveSettings();\r\n\r\n      new Notice(`Saved GM zones map to ${outputName}.`);\r\n      this.close();\r\n    } catch (error) {\r\n      console.error(\"Failed to render GM zones map\", error);\r\n      new Notice(\"Failed to create GM zones map. Check console for details.\");\r\n    }\r\n  }\r\n\r\n  async renderLabeledImage() {\r\n    const zoneIds = this.getZoneIds();\r\n    const imageElement = await this.loadImageElement();\r\n    const canvas = document.createElement(\"canvas\");\r\n    canvas.width = imageElement.naturalWidth;\r\n    canvas.height = imageElement.naturalHeight;\r\n    const ctx = canvas.getContext(\"2d\");\r\n\r\n    ctx.drawImage(imageElement, 0, 0);\r\n\r\n    const fontSize = Math.max(18, Math.round(canvas.width * 0.02));\r\n    const radius = Math.max(18, Math.round(canvas.width * 0.02));\r\n    ctx.font = `bold ${fontSize}px sans-serif`;\r\n    ctx.textAlign = \"center\";\r\n    ctx.textBaseline = \"middle\";\r\n\r\n    this.points.forEach((point, index) => {\r\n      const x = point.x * canvas.width;\r\n      const y = point.y * canvas.height;\r\n      const label = point.id || zoneIds[index] || `Z${index + 1}`;\r\n\r\n      ctx.fillStyle = \"rgba(0, 0, 0, 0.75)\";\r\n      ctx.beginPath();\r\n      ctx.arc(x, y, radius, 0, Math.PI * 2);\r\n      ctx.fill();\r\n\r\n      ctx.fillStyle = \"white\";\r\n      ctx.fillText(label, x, y);\r\n    });\r\n\r\n    const pngDataUrl = canvas.toDataURL(\"image/png\");\r\n    return pngDataUrl.split(\",\")[1];\r\n  }\r\n\r\n  loadImageElement() {\r\n    return new Promise((resolve, reject) => {\r\n      const img = new Image();\r\n      img.onload = () => resolve(img);\r\n      img.onerror = (error) => reject(error);\r\n      img.src = this.dataUrl;\r\n    });\r\n  }\r\n}\r\n\r\nclass LazyDMSettingsTab extends PluginSettingTab {\r\n  constructor(app, plugin) {\r\n    super(app, plugin);\r\n    this.plugin = plugin;\r\n  }\r\n\r\n  display() {\r\n    const { containerEl } = this;\r\n    containerEl.empty();\r\n\r\n    containerEl.createEl(\"h2\", { text: \"Lazy Dungeon Master\" });\r\n\r\n    new Setting(containerEl)\r\n      .setName(\"OpenRouter API Key\")\r\n      .setDesc(\"Stored locally. Required for OpenRouter requests.\")\r\n      .addText((text) => {\r\n        text\r\n          .setPlaceholder(\"sk-or-...\")\r\n          .setValue(this.plugin.settings.openrouterApiKey)\r\n          .onChange(async (value) => {\r\n            this.plugin.settings.openrouterApiKey = value;\r\n            await this.plugin.saveSettings();\r\n          });\r\n        text.inputEl.type = \"password\";\r\n      });\r\n\r\n    new Setting(containerEl)\r\n      .setName(\"Extractor model\")\r\n      .setDesc(\"Model used for extracting details from prompts.\")\r\n      .addText((text) =>\r\n        text\r\n          .setPlaceholder(DEFAULT_SETTINGS.extractorModel)\r\n          .setValue(this.plugin.settings.extractorModel)\r\n          .onChange(async (value) => {\r\n            this.plugin.settings.extractorModel = value || DEFAULT_SETTINGS.extractorModel;\r\n            await this.plugin.saveSettings();\r\n          })\r\n      );\r\n\r\n    new Setting(containerEl)\r\n      .setName(\"Synthesizer model\")\r\n      .setDesc(\"Model used for creating narrative content.\")\r\n      .addText((text) =>\r\n        text\r\n          .setPlaceholder(DEFAULT_SETTINGS.synthesizerModel)\r\n          .setValue(this.plugin.settings.synthesizerModel)\r\n          .onChange(async (value) => {\r\n            this.plugin.settings.synthesizerModel = value || DEFAULT_SETTINGS.synthesizerModel;\r\n            await this.plugin.saveSettings();\r\n          })\r\n      );\r\n\r\n    new Setting(containerEl)\r\n      .setName(\"OpenRouter base URL\")\r\n      .setDesc(\"Base API URL for OpenRouter requests.\")\r\n      .addText((text) =>\r\n        text\r\n          .setPlaceholder(DEFAULT_SETTINGS.openrouterBaseUrl)\r\n          .setValue(this.plugin.settings.openrouterBaseUrl)\r\n          .onChange(async (value) => {\r\n            this.plugin.settings.openrouterBaseUrl = value || DEFAULT_SETTINGS.openrouterBaseUrl;\r\n            await this.plugin.saveSettings();\r\n          })\r\n      );\r\n  }\r\n}\r\n", "import { Notice, requestUrl } from \"obsidian\";\r\n\r\nexport class OpenRouterClient {\r\n  constructor({ baseUrl, apiKey }) {\r\n    this.baseUrl = baseUrl?.replace(/\\/$/, \"\") || \"\";\r\n    this.apiKey = apiKey || \"\";\r\n  }\r\n\r\n  async createChatCompletion({ model, messages }) {\r\n    if (!this.apiKey) {\r\n      const message = \"OpenRouter API key is not set.\";\r\n      console.error(`[OpenRouter] ${message}`);\r\n      new Notice(message);\r\n      throw new Error(message);\r\n    }\r\n\r\n    const url = `${this.baseUrl}/chat/completions`;\r\n    try {\r\n      const response = await requestUrl({\r\n        url,\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${this.apiKey}`,\r\n        },\r\n        body: JSON.stringify({\r\n          model,\r\n          messages,\r\n        }),\r\n      });\r\n\r\n      if (response.status < 200 || response.status >= 300) {\r\n        const snippet = (response.text || \"\").slice(0, 200) || \"No response body\";\r\n        const message = `OpenRouter error ${response.status}: ${snippet}`;\r\n        console.error(`[OpenRouter] ${message}`);\r\n        new Notice(message);\r\n        throw new Error(message);\r\n      }\r\n\r\n      return response.json ?? JSON.parse(response.text || \"{}\");\r\n    } catch (error) {\r\n      const message = `OpenRouter request failed: ${error?.message || error}`;\r\n      console.error(`[OpenRouter] ${message}`, error);\r\n      new Notice(message);\r\n      throw error;\r\n    }\r\n  }\r\n}\r\n"],
  "mappings": "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",
  "names": ["import_obsidian"]
}
